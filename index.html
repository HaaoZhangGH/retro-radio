<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#111111" />
    <link rel="icon" href="icons/icon.svg" />
    <title>Retro Radio</title>
  </head>
  <body>
    <div class="corner-controls" aria-label="Debug controls">
      <button class="btn" id="new-weather" type="button">New Weather</button>
      <button class="btn" id="test-lightning" type="button">Lightning</button>
      <button class="btn" id="reset-defaults" type="button">Reset</button>
    </div>
    <canvas id="fx-canvas" class="fx-canvas" aria-hidden="true"></canvas>
    <main class="page">
      <header class="header">
        <h1 class="title">Audio Receiver T-3</h1>
        <p class="subtitle">Power on · Scan · Pick a station · Offline ready</p>
      </header>

      <section class="stage" aria-label="Radio stage">
        <!-- SVG 主体 -->
        <div class="radio-wrap" aria-label="Retro radio">
          <svg
            id="main-radio"
            viewBox="0 0 800 460"
            xmlns="http://www.w3.org/2000/svg"
            class="radio"
            role="img"
            aria-label="Retro radio UI"
          >
      <defs>
         <linearGradient id="bodyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
             <stop offset="0%" style="stop-color:#f2f2f2;stop-opacity:1" />
             <stop offset="100%" style="stop-color:#dcdcdc;stop-opacity:1" />
         </linearGradient>

         <linearGradient id="knobGradient" x1="0%" y1="0%" x2="100%" y2="100%">
             <stop offset="0%" style="stop-color:#555;stop-opacity:1" />
             <stop offset="50%" style="stop-color:#333;stop-opacity:1" />
             <stop offset="100%" style="stop-color:#111;stop-opacity:1" />
         </linearGradient>

         <filter id="screenShadow">
             <feOffset dx="0" dy="2" />
             <feGaussianBlur stdDeviation="2" result="blur" />
             <feComposite in="SourceGraphic" in2="blur" operator="out" result="inv" />
             <feFlood flood-color="black" flood-opacity="0.5" result="color" />
             <feComposite in="color" in2="inv" operator="in" result="shadow" />
             <feComposite in="shadow" in2="SourceGraphic" operator="over" />
         </filter>

         <clipPath id="screenClip">
           <rect x="4" y="4" width="252" height="102" rx="4" ry="4" />
         </clipPath>
     </defs>

     <!-- 1. 机身主体 -->
     <rect x="50" y="30" width="700" height="400" rx="24" ry="24" fill="url(#bodyGradient)" stroke="#bbb" stroke-width="1" />

     <!-- 2. 左侧扬声器区域 -->
     <!-- 背景黑底 -->
     <rect x="90" y="70" width="320" height="320" rx="16" ry="16" fill="#1a1a1a" />

     <!-- 扬声器网格容器 (由 JS 生成内容) -->
     <g id="speaker-grid" transform="translate(90, 70)">
         <!-- Dots will be generated here -->
     </g>

     <!-- 3. 右侧控制区 -->

     <!-- 3.1 屏幕 -->
     <g transform="translate(450, 70)">
         <!-- 外框 -->
         <rect x="0" y="0" width="260" height="110" rx="6" fill="#111" stroke="#333" stroke-width="2" />
         <!-- 内屏 -->
         <rect x="4" y="4" width="252" height="102" rx="4" fill="#000" filter="url(#screenShadow)" />

         <g id="screen-content" class="screen-glow" clip-path="url(#screenClip)">
             <text id="freq-text" x="245" y="66" text-anchor="end" fill="#4ade80" font-family="ui-monospace, Menlo, monospace" font-size="34" letter-spacing="1">
                 00:00
             </text>
             <text x="245" y="26" text-anchor="end" fill="#4ade80" font-family="ui-monospace, Menlo, monospace" font-size="14" letter-spacing="2">TIME</text>

             <text id="station-text" x="15" y="26" text-anchor="start" fill="#fbbf24" font-family="ui-monospace, Menlo, monospace" font-weight="700" font-size="14" letter-spacing="2">
                 RAINING RADIO
             </text>

             <g transform="translate(15, 0)" id="equalizer-bars">
                 <rect class="bar" x="0" y="96" width="18" height="4" rx="2" />
                 <rect class="bar" x="24" y="96" width="18" height="4" rx="2" />
                 <rect class="bar" x="48" y="96" width="18" height="4" rx="2" />
                 <rect class="bar" x="72" y="96" width="18" height="4" rx="2" />
                 <rect class="bar" x="96" y="96" width="18" height="4" rx="2" />
                 <rect class="bar" x="120" y="96" width="18" height="4" rx="2" />
                 <rect class="bar" x="144" y="96" width="18" height="4" rx="2" />
                 <rect class="bar" x="168" y="96" width="18" height="4" rx="2" />
             </g>

             <circle id="mode-led" cx="235" cy="90" r="3" fill="#555" opacity="0.9" />
             <text id="mode-text" x="225" y="93" text-anchor="end" fill="#9ca3af" font-family="ui-monospace, Menlo, monospace" font-size="10" letter-spacing="1" opacity="0.9">PAUSED</text>
         </g>

         <g id="glass-drops" clip-path="url(#screenClip)" pointer-events="none"></g>
         <rect id="static-overlay" x="4" y="4" width="252" height="102" rx="4" fill="white" opacity="0" pointer-events="none" />
         <rect id="flash-overlay" x="4" y="4" width="252" height="102" rx="4" fill="white" opacity="0" pointer-events="none" />
     </g>

     <!-- 3.2 音量旋钮 -->
     <g transform="translate(490, 250)">
         <circle cx="0" cy="0" r="25" fill="url(#knobGradient)" stroke="#444" stroke-width="1" />
         <circle cx="0" cy="0" r="20" fill="#222" />
         <rect x="-1.5" y="-20" width="3" height="8" rx="1.5" fill="#fff" />
         <text x="0" y="45" text-anchor="middle" fill="#666" font-size="12" font-weight="600" letter-spacing="1">VOLUME</text>
     </g>

     <!-- 3.3 调频大旋钮 -->
     <g id="tuning-knob-area" class="interactive-area knob-hover" transform="translate(620, 300)" tabindex="0" role="button" aria-label="Scan next station">

         <!-- 阴影 -->
         <circle cx="0" cy="0" r="52" fill="rgba(0,0,0,0.15)" />

         <!-- 旋转组 -->
         <g id="tuning-knob-rotate-group">
             <circle cx="0" cy="0" r="50" fill="url(#knobGradient)" stroke="#666" stroke-width="1" />
             <circle cx="0" cy="0" r="44" fill="#1a1a1a" />
             <!-- 抓握纹理 -->
             <circle cx="0" cy="0" r="40" fill="none" stroke="#333" stroke-width="4" stroke-dasharray="2 6" opacity="0.3" />
             <!-- 指示点 -->
             <circle cx="0" cy="-35" r="4" fill="#fff" />
         </g>

         <text x="0" y="80" text-anchor="middle" fill="#666" font-size="12" font-weight="600" letter-spacing="1">TUNING</text>
     </g>

     <!-- 3.4 电源开关 -->
     <g id="power-button" transform="translate(465, 340)" class="interactive-area power-btn-hover power-btn-active" tabindex="0" role="button" aria-label="Toggle power" aria-pressed="false">
         <rect x="0" y="0" width="50" height="30" rx="15" fill="#ccc" />
         <rect x="2" y="2" width="46" height="26" rx="13" fill="#333" stroke="#111" stroke-width="1" />
         <text x="25" y="19" text-anchor="middle" fill="#aaa" font-size="10" font-weight="bold">POWER</text>
         <circle id="power-led" cx="65" cy="15" r="4" fill="#444" />
     </g>

     <!-- 天线 -->
     <line x1="680" y1="30" x2="680" y2="5" stroke="#999" stroke-width="3" stroke-linecap="round" />
     <circle cx="680" cy="5" r="3" fill="#999" />

          </svg>
        </div>

        <div class="status-line" id="status-text" aria-label="Weather status">[ BOOTING ]</div>

        <p class="footnote">
          Tips: audio starts after your first click/keypress (browser policy). POWER toggles sound. Click the tuning
          knob to scan (debug). You can also drag &amp; drop an audio file into the page.
        </p>
      </section>
    </main>
    <div class="build-no" aria-hidden="true">No. 002</div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
